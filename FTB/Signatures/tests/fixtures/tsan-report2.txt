WARNING: ThreadSanitizer: data race (pid=1126)
  Write of size 8 at 0x7b7c001d0d08 by thread T43:
    #0 free /builds/worker/fetches/llvm-project/llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:706:3 (firefox+0x55f18)
    #1 _dl_deallocate_tls <null> (ld-linux-x86-64.so.2+0x139a7)
  Previous write of size 8 at 0x7b7c001d0d08 by thread T5 (mutexes: write M176):
    #0 set /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/ThreadLocal.h:161:12 (libxul.so+0x5ebeca6)
    #1 set /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/ThreadLocal.h:209:32 (libxul.so+0x5ebeca6)
    #2 ResetAutoProfilerLabelProfilingStack /builds/worker/workspace/build/src/tools/profiler/core/platform.cpp:1308:48 (libxul.so+0x5ebeca6)
    #3 profiler_unregister_thread() /builds/worker/workspace/build/src/tools/profiler/core/platform.cpp:4555:5 (libxul.so+0x5ebeca6)
    #4 nsThread::ThreadFunc(void*) /builds/worker/workspace/build/src/xpcom/threads/nsThread.cpp:493:3 (libxul.so+0xa67142)
    #5 _pt_root /builds/worker/workspace/build/src/nsprpub/pr/src/pthreads/ptthread.c:209:5 (libnspr4.so+0x46756)
  Mutex M176 (0x7f0d76677d90) created at:
    #0 pthread_mutex_init /builds/worker/fetches/llvm-project/llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:1225:3 (firefox+0x587ed)
    #1 mozilla::detail::MutexImpl::MutexImpl(mozilla::recordreplay::Behavior) /builds/worker/workspace/build/src/mozglue/misc/Mutex_posix.cpp:103:3 (firefox+0x122e72)
    #2 PSMutex /builds/worker/workspace/build/src/tools/profiler/core/platform.cpp:258:9 (libxul.so+0x90553e)
    #3 __cxx_global_var_init /builds/worker/workspace/build/src/tools/profiler/core/platform.cpp:1243:16 (libxul.so+0x90553e)
    #4 _GLOBAL__sub_I_Unified_cpp_tools_profiler0.cpp /builds/worker/workspace/build/src/obj-firefox/tools/profiler/Unified_cpp_tools_profiler0.cpp (libxul.so+0x90553e)
    #5 <null> <null> (ld-linux-x86-64.so.2+0x106c9)
    #6 GetLibHandle /builds/worker/workspace/build/src/xpcom/glue/standalone/nsXPCOMGlue.cpp:85:29 (firefox+0xc989f)
    #7 ReadDependentCB /builds/worker/workspace/build/src/xpcom/glue/standalone/nsXPCOMGlue.cpp:135:29 (firefox+0xc989f)
    #8 XPCOMGlueLoad /builds/worker/workspace/build/src/xpcom/glue/standalone/nsXPCOMGlue.cpp:309:10 (firefox+0xc989f)
    #9 mozilla::GetBootstrap(char const*, mozilla::LibLoadingStrategy) /builds/worker/workspace/build/src/xpcom/glue/standalone/nsXPCOMGlue.cpp:377:7 (firefox+0xc989f)
    #10 InitXPCOMGlue(mozilla::LibLoadingStrategy) /builds/worker/workspace/build/src/browser/app/nsBrowserApp.cpp:231:16 (firefox+0xc8bc1)
    #11 main /builds/worker/workspace/build/src/browser/app/nsBrowserApp.cpp:324:17 (firefox+0xc8506)
  Thread T5 'SaveScripts' (tid=1310, finished) created by main thread at:
    #0 pthread_create /builds/worker/fetches/llvm-project/llvm/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967:3 (firefox+0x571ab)
    #1 _PR_CreateThread /builds/worker/workspace/build/src/nsprpub/pr/src/pthreads/ptthread.c:466:14 (libnspr4.so+0x3dc53)
    #2 PR_CreateThread /builds/worker/workspace/build/src/nsprpub/pr/src/pthreads/ptthread.c:541:12 (libnspr4.so+0x32152)
    #3 nsThread::Init(nsTSubstring<char> const&) /builds/worker/workspace/build/src/xpcom/threads/nsThread.cpp:670:8 (libxul.so+0xa6847a)
    #4 nsThreadManager::NewNamedThread(nsTSubstring<char> const&, unsigned int, nsIThread**) /builds/worker/workspace/build/src/xpcom/threads/nsThreadManager.cpp:621:12 (libxul.so+0xa6eba5)
    #5 NS_NewNamedThread(nsTSubstring<char> const&, nsIThread**, nsIRunnable*, unsigned int) /builds/worker/workspace/build/src/xpcom/threads/nsThreadUtils.cpp:139:57 (libxul.so+0xa70c98)
    #6 NS_NewNamedThread<12> /builds/worker/workspace/build/src/obj-firefox/dist/include/nsThreadUtils.h:69:10 (libxul.so+0x181772d)
    #7 mozilla::ScriptPreloader::StartCacheWrite() /builds/worker/workspace/build/src/js/xpconnect/loader/ScriptPreloader.cpp:261:13 (libxul.so+0x181772d)
    #8 mozilla::ScriptPreloader::Observe(nsISupports*, char const*, char16_t const*) /builds/worker/workspace/build/src/js/xpconnect/loader/ScriptPreloader.cpp:317:7 (libxul.so+0x1817e5d)
    #9 nsObserverList::NotifyObservers(nsISupports*, char const*, char16_t const*) /builds/worker/workspace/build/src/xpcom/ds/nsObserverList.cpp:65:19 (libxul.so+0x9d59f3)
    #10 nsObserverService::NotifyObservers(nsISupports*, char const*, char16_t const*) /builds/worker/workspace/build/src/xpcom/ds/nsObserverService.cpp:291:19 (libxul.so+0x9d88a0)
    #11 NS_InvokeByIndex /builds/worker/workspace/build/src/xpcom/reflect/xptcall/md/unix/xptcinvoke_asm_x86_64_unix.S:106 (libxul.so+0xa8b195)
    #12 XPC_WN_CallMethod(JSContext*, unsigned int, JS::Value*) /builds/worker/workspace/build/src/js/xpconnect/src/XPCWrappedNativeJSOps.cpp:947:10 (libxul.so+0x187e1d1)
    #13 CallJSNative /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:469:13 (libxul.so+0x64020b8)
    #14 js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason) /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:561:12 (libxul.so+0x64020b8)
    #15 InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason) /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:624:10 (libxul.so+0x64030cb)
    #16 CallFromStack /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:628:10 (libxul.so+0x63f4a48)
    #17 Interpret(JSContext*, js::RunState&) /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:3036:16 (libxul.so+0x63f4a48)
    #18 js::RunScript(JSContext*, js::RunState&) /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:441:10 (libxul.so+0x63e4381)
    #19 js::InternalCallOrConstruct(JSContext*, JS::CallArgs const&, js::MaybeConstruct, js::CallReason) /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:596:13 (libxul.so+0x640251e)
    #20 InternalCall(JSContext*, js::AnyInvokeArgs const&, js::CallReason) /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:624:10 (libxul.so+0x64030cb)
    #21 js::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, js::AnyInvokeArgs const&, JS::MutableHandle<JS::Value>, js::CallReason) /builds/worker/workspace/build/src/js/src/vm/Interpreter.cpp:641:8 (libxul.so+0x640317a)
    #22 JS::Call(JSContext*, JS::Handle<JS::Value>, JS::Handle<JS::Value>, JS::HandleValueArray const&, JS::MutableHandle<JS::Value>) /builds/worker/workspace/build/src/js/src/jsapi.cpp:2797:10 (libxul.so+0x64b6ece)
    #23 mozilla::dom::IdleRequestCallback::Call(JSContext*, JS::Handle<JS::Value>, mozilla::dom::IdleDeadline&, mozilla::ErrorResult&) /builds/worker/workspace/build/src/obj-firefox/dom/bindings/WindowBinding.cpp:803:8 (libxul.so+0x2e5dbd2)
    #24 Call /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/dom/WindowBinding.h:766:12 (libxul.so+0x24d3480)
    #25 Call /builds/worker/workspace/build/src/obj-firefox/dist/include/mozilla/dom/WindowBinding.h:779:12 (libxul.so+0x24d3480)
    #26 mozilla::dom::IdleRequest::IdleRun(nsPIDOMWindowInner*, double, bool) /builds/worker/workspace/build/src/dom/base/IdleRequest.cpp:62:13 (libxul.so+0x24d3480)
    #27 nsGlobalWindowInner::RunIdleRequest(mozilla::dom::IdleRequest*, double, bool) /builds/worker/workspace/build/src/dom/base/nsGlobalWindowInner.cpp:664:12 (libxul.so+0x2360bd3)
    #28 nsGlobalWindowInner::ExecuteIdleRequest(mozilla::TimeStamp) /builds/worker/workspace/build/src/dom/base/nsGlobalWindowInner.cpp:692:3 (libxul.so+0x235ff91)
    #29 IdleRequestExecutor::Run() /builds/worker/workspace/build/src/dom/base/nsGlobalWindowInner.cpp:533:13 (libxul.so+0x235fc96)
    #30 nsThread::ProcessNextEvent(bool, bool*) /builds/worker/workspace/build/src/xpcom/threads/nsThread.cpp:1220:14 (libxul.so+0xa6a8a3)
    #31 NS_ProcessNextEvent(nsIThread*, bool) /builds/worker/workspace/build/src/xpcom/threads/nsThreadUtils.cpp:486:10 (libxul.so+0xa6f4a2)
    #32 mozilla::ipc::MessagePump::Run(base::MessagePump::Delegate*) /builds/worker/workspace/build/src/ipc/glue/MessagePump.cpp:87:21 (libxul.so+0x12a3e99)
    #33 RunInternal /builds/worker/workspace/build/src/ipc/chromium/src/base/message_loop.cc:315:10 (libxul.so+0x123c0ec)
    #34 RunHandler /builds/worker/workspace/build/src/ipc/chromium/src/base/message_loop.cc:308:3 (libxul.so+0x123c0ec)
    #35 MessageLoop::Run() /builds/worker/workspace/build/src/ipc/chromium/src/base/message_loop.cc:290:3 (libxul.so+0x123c0ec)
    #36 nsBaseAppShell::Run() /builds/worker/workspace/build/src/widget/nsBaseAppShell.cpp:137:27 (libxul.so+0x46b7883)
    #37 nsAppStartup::Run() /builds/worker/workspace/build/src/toolkit/components/startup/nsAppStartup.cpp:272:30 (libxul.so+0x61bd075)
    #38 XREMain::XRE_mainRun() /builds/worker/workspace/build/src/toolkit/xre/nsAppRunner.cpp:4560:22 (libxul.so+0x62d02ae)
    #39 XREMain::XRE_main(int, char**, mozilla::BootstrapConfig const&) /builds/worker/workspace/build/src/toolkit/xre/nsAppRunner.cpp:4695:8 (libxul.so+0x62d0f2f)
    #40 XRE_main(int, char**, mozilla::BootstrapConfig const&) /builds/worker/workspace/build/src/toolkit/xre/nsAppRunner.cpp:4746:21 (libxul.so+0x62d12f4)
    #41 mozilla::BootstrapImpl::XRE_main(int, char**, mozilla::BootstrapConfig const&) /builds/worker/workspace/build/src/toolkit/xre/Bootstrap.cpp:45:12 (libxul.so+0x62da002)
    #42 do_main /builds/worker/workspace/build/src/browser/app/nsBrowserApp.cpp:217:22 (firefox+0xc8a47)
    #43 main /builds/worker/workspace/build/src/browser/app/nsBrowserApp.cpp:339:16 (firefox+0xc8a47)
SUMMARY: ThreadSanitizer: data race (/lib64/ld-linux-x86-64.so.2+0x139a7) in _dl_deallocate_tls
